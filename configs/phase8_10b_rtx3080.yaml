# Phase 8: 10B Parameter Model - RTX 3080 8GB Optimized
# =====================================================
# Target: RTX 3080 8GB VRAM, 10B+ equivalent parameters
# Compression: 96%+ via BitNet + Low-Rank
# Expected VRAM: ~2.7GB (5.3GB headroom)

# === Model Architecture (10B equivalent) ===
d_model: 4096
n_layers: 48
n_seq: 512
num_heads: 32
htt_rank: 16
hyperbolic_window_size: 64
vocab_size: 50257

# === Ultra Compression (96-97%) ===
low_rank_ffn: true
low_rank_attention: true
low_rank_rank: 16
use_bitnet: true

# === Memory Optimization (CRITICAL for 8GB) ===
use_gradient_checkpointing: true
gradient_checkpointing_segments: 12
use_mixed_precision: true
mixed_precision_dtype: bfloat16

# === Gradient Accumulation ===
batch_size: 1
gradient_accumulation_steps: 32
effective_batch_size: 32

# === Optimizer ===
optimizer_type: muon
learning_rate: 0.02
warmup_steps: 2000
max_grad_norm: 0.5
warmup_min_lr: 1.0e-6

# === Phase 8 Components ===
use_bk_hyperbolic: true
use_ar_ssm_fusion: true
enable_numerical_guards: true

# Disable heavy optional components for 8GB
enable_entailment_cones: false
enable_persistent_homology: false
enable_sheaf_attention: false
enable_adaptive_computation: false

# === Triton Kernels (with Safe-Log) ===
use_triton_kernel: true
triton_kernel_version: fast
triton_use_safe_ops: true
use_fused_kernels: true

# === torch.compile (PyTorch 2.0+) ===
use_torch_compile: true
compile_mode: max-autotune
compile_fullgraph: false

# === Flash Attention 2 ===
use_flash_attention_2: true

# === DataLoader Optimization ===
num_workers: 8
pin_memory: true
prefetch_factor: 4
persistent_workers: true

# === Logging ===
log_interval: 10
save_interval: 1000
eval_interval: 500
save_dir: checkpoints/phase8_10b_rtx3080

# === Numerical Stability ===
max_norm: 0.99
numerical_epsilon: 1.0e-8
scale_epsilon: 1.0e-3

# === Memory Budget Estimate (RTX 3080 8GB) ===
# Model Parameters (BitNet): ~0.07 GB
# Activations (checkpointed): ~1.5 GB
# Optimizer States (Muon): ~0.4 GB
# Gradients (BF16): ~0.72 GB
# TOTAL: ~2.7 GB (5.3GB headroom for sequences/buffers)
