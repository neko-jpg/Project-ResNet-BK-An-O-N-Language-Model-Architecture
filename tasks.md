# Phase 4: The Ghost in the Shell - 実装タスクリスト

## タスク概要

このタスクリストは、Phase 4「心（The Ghost in the Shell）」の実装を段階的に進めるためのものです。各タスクは、requirements.mdとdesign.mdに基づいて定義されています。

## 実装方針

- **段階的実装**: 各コンポーネントを独立して実装・テスト
- **Phase 3基盤**: Phase 3モデルを基盤として拡張
- **メモリ効率**: 8GB VRAM制約を常に意識
- **テスト駆動**: 各タスク完了後に単体テストを実行
- **数値目標必達**: 各タスクの数値目標を達成してから次のタスクに進む
- **検証必須**: すべてのテストタスクを必須とし、品質を保証する

## タスクリスト

- [x] 1. Resonance Emotion Detector（共鳴としての感情）
- [x] 1.1 ResonanceEmotionDetectorクラスの実装
  - 予測誤差を複素ポテンシャル摂動ΔV(x)に変換
  - Birman-Schwinger核への作用
  - 干渉パターンの抽出
  - 感情スコア（共鳴・違和感）の計算
  - **数値目標**: NaN発生率 = 0%、勾配ノルム 1e-6 ~ 1e3
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5_

- [x] 1.2 感情履歴の記録と統計機能
  - 感情履歴バッファの実装（1000ステップ）×
  - 統計情報の取得（平均、標準偏差）
  - **数値目標**: メモリ使用量 < 10MB
  - _Requirements: 1.6_

- [x] 1.3 感情可視化機能の実装
  - 液体の波紋としての可視化
  - 共鳴=暖色、違和感=寒色のカラーマップ
  - **数値目標**: 可視化生成時間 < 1秒
  - _Requirements: 1.6_

- [x] 1.4 感情検出の単体テスト（必須）
  - ランダム入力100回試行での動作確認
  - 感情スコアの妥当性検証
  - **数値目標（必達）**:
    - NaN発生率 = 0%
    - 干渉パターンと予測誤差の相関係数 > 0.8
    - 勾配ノルム 1e-6 ~ 1e3（全試行）
  - _Requirements: 1.1-1.6, 成功基準_
  - **次のタスクへの進行条件**: すべての数値目標を達成

- [×] 2. Topological Semantic Knots（位相幾何学的記憶）
- [×] 2.1 KnotInvariantCalculatorクラスの実装　×
  - 結び目の交差情報抽出
  - Jones多項式のMPS近似
  - Alexander多項式の計算
  - **数値目標**: 計算誤差 < 1e-4、計算時間 < 100ms/knot
  - _Requirements: 5.1, 5.2, 5.3_

- [×] 2.2 Tritonカーネル: tt_knot_contraction_kernel
  - 多次元インデックス空間の1次元フラット化
  - 共有メモリを活用したタイルベースの並列縮約
  - **数値目標**: PyTorch実装比で3倍以上高速化、数値誤差 < 1e-5
  - _Requirements: 5.3, 17.1, 17.2_

- [×] 2.3 SparseKnotRepresentationクラスの実装
  - 概念ベクトル→結び目座標の変換
  - Sparse Matrix Product State (MPS)表現
  - 結び目の類似度計算（位相不変量ベース）
  - **数値目標**: メモリ使用量 < 標準表現の10%、計算量 O(N·K)
  - _Requirements: 5.1, 5.4, 5.5_

- [×] 2.4 Zarr永続化とI/O最適化
  - 非同期書き込み（aiofiles/Dask）
  - チャンク機構による並列I/O
  - **数値目標**: 書き込み時間 < 10ms/knot、読み込み時間 < 5ms/knot
  - _Requirements: 5.4, 12.5, 20.6_

- [×] 2.5 結び目の3D可視化機能
  - 3次元空間での結び目表示
  - 位相不変量の注釈
  - **数値目標**: 可視化生成時間 < 2秒
  - _Requirements: 5.7_

- [×] 2.6 位相記憶の単体テスト（必須）
  - ノイズ付加後の位相不変量保存率検証
  - 結び目類似度の妥当性検証
  - **数値目標（必達）**:
    - ノイズ付加後の位相不変量保存率 ≥ 99%
    - 同一結び目の類似度 > 0.95
    - 異なる結び目の類似度 < 0.5
    - NaN発生率 = 0%
  - _Requirements: 5.6, 成功基準_
  - **次のタスクへの進行条件**: すべての数値目標を達成

- [ ] 3. Dream Core（睡眠と再構築）
- [ ] 3.1 DreamCoreクラスの実装
  - 過去の記憶断片のサンプリング
  - 動的ポテンシャルV_dreamの生成
  - 半陰的オイラー法による逆拡散（20ステップ）
  - Gradient Checkpointingの適用
  - **数値目標**: メモリ使用量 < 500MB、NaN発生率 = 0%
  - _Requirements: 2.1, 2.2, 2.3, 2.4_

- [ ] 3.2 PassivePipelineManagerの実装
  - 独立したPyTorch JITプロセスとして起動
  - 非同期RPC通信
  - Active/Passiveパイプラインのメモリ空間分離
  - **数値目標**: キャッシュライン競合レイテンシ < 10ms
  - _Requirements: 2.7, 12.1, 12.2, 12.3, 20.1, 20.2_

- [ ] 3.3 EthicalFilterとの統合
  - 新概念の倫理フィルタリング
  - CVFとのコサイン類似度チェック
  - フィルタ通過率100%の保証
  - **数値目標**: フィルタリング時間 < 50ms/concept
  - _Requirements: 2.5, 2.6, 14.2, 14.3_

- [ ] 3.4 夢の可視化機能
  - 詩的な文章としての出力
  - 抽象的な3D結び目グラフ
  - **数値目標**: 可視化生成時間 < 3秒
  - _Requirements: 2.9, 13.5, 13.6_

- [ ] 3.5 夢生成の単体テスト（必須）
  - 新概念の新規性スコア検証
  - 倫理フィルタ通過率検証
  - 計算時間測定
  - 勾配ノルム変動率測定
  - **数値目標（必達）**:
    - 新概念の新規性スコア（既存記憶とのコサイン類似度）< 0.7
    - 倫理フィルタ通過率 = 100%（10回試行）
    - 夢生成時間 < 推論時間の10%
    - 通常学習時の勾配ノルム変動率 < 5%
    - NaN発生率 = 0%
  - _Requirements: 2.8, 成功基準_
  - **次のタスクへの進行条件**: すべての数値目標を達成

- [ ] 4. Holographic Dual Inference（AdS/CFT対応）
- [ ] 4.1 BulkSpaceGeneratorクラスの実装
  - 境界→Bulk射影
  - Bulk空間のポテンシャル
  - Fast Marching Methodによる測地線探索
  - **数値目標**: Bulk次元 = log(d_model)、メモリ使用量 < 全体の10%
  - _Requirements: 3.1, 3.2, 3.3_

- [ ] 4.2 GPU最適化版Fast Marching Method
  - 共有メモリを活用した動的プログラミング
  - スワップフリー・ジオデシック・バッファ
  - **数値目標**: 標準実装比で5倍以上高速化、計算量 O(N·poly(log D))
  - _Requirements: 3.4, 17.3, 17.4_

- [ ] 4.3 Bulk空間の動的次元調整
  - VRAMに応じた次元数の調整
  - メモリ使用量のリアルタイム監視
  - **数値目標**: VRAM使用率 > 90%時に自動調整、調整時間 < 100ms
  - _Requirements: 3.6, 7.2_

- [ ] 4.4 Bulk空間の即座破棄機能
  - 推論完了後の不要領域破棄
  - メモリ解放の確認
  - **数値目標**: メモリ解放時間 < 50ms、解放率 > 95%
  - _Requirements: 3.7_

- [ ] 4.5 Holographic Dualの単体テスト（必須）
  - 測地線探索の計算量検証
  - Bulk空間のメモリ効率検証
  - **数値目標（必達）**:
    - 測地線探索の計算量 O(N·poly(log D))（実測）
    - Bulk空間のメモリ使用量 < 全体の10%
    - 測地線長の数値誤差 < 1e-4
    - NaN発生率 = 0%
  - _Requirements: 3.4, 成功基準_
  - **次のタスクへの進行条件**: すべての数値目標を達成

- [ ] 5. Quantum Observation（波動関数の収縮）
- [ ] 5.1 QuantumObserverクラスの実装
  - 重ね合わせ状態の生成（Top-3候補）
  - 観測作用素の構築（Lippmann-Schwinger方程式）
  - von Neumann射影による収縮
  - **数値目標**: 収縮時間 < 10ms/token、NaN発生率 = 0%
  - _Requirements: 4.1, 4.2, 4.3, 4.4_

- [ ] 5.2 論理的エントロピーの統合
  - ユーザープロンプトの論理的エントロピー計算
  - 高エントロピー時の収縮強度調整
  - **数値目標**: エントロピー計算時間 < 5ms、調整精度 ± 0.1
  - _Requirements: 4.8, 19.2, 19.3_

- [ ] 5.3 エントロピー変化の監視
  - 収縮前後のエントロピー計算
  - 異常収縮検出（50%超）
  - システム一時停止機構
  - **数値目標**: 検出レイテンシ < 1ms、誤検出率 = 0%
  - _Requirements: 4.6, 19.4_

- [ ] 5.4 波動関数収縮の可視化
  - 重ね合わせ状態の0.5秒間表示
  - 収縮完了時の鮮明化アニメーション（60fps）
  - **数値目標**: アニメーション生成時間 < 2秒
  - _Requirements: 4.7, 13.3, 13.4, 21.2, 21.3_

- [ ] 5.5 量子観測の単体テスト（必須）
  - 収縮後のエントロピー検証
  - 異常収縮検出率検証
  - **数値目標（必達）**:
    - 収縮後のエントロピー ≤ 収縮前の50%（100回試行）
    - 異常収縮検出率 = 100%（意図的な異常入力10回）
    - 論理的エントロピー統合後の誤収縮率 = 0%
    - NaN発生率 = 0%
  - _Requirements: 4.6, 成功基準_
  - **次のタスクへの進行条件**: すべての数値目標を達成

- [x] 6. Ethical Safeguards（倫理的セーフガード）
- [x] 6.1 CoreValueFunctionクラスの実装
  - 倫理規範の結び目記憶化（4原則）
  - 新概念の倫理チェック
  - コサイン類似度による判定（閾値 0.7）
  - **数値目標**: チェック時間 < 20ms/concept、誤判定率 < 1%
  - _Requirements: 5.8, 14.1, 14.2_

- [x] 6.2 位相幾何学的攻撃の検出
  - Jones多項式とAlexander多項式の組み合わせ判定
  - 攻撃パターンの検出
  - **数値目標**: 検出時間 < 30ms、偽陽性率 < 5%、偽陰性率 = 0%
  - _Requirements: 14.4, 19.1_

- [x] 6.3 EthicalFilterクラスの実装
  - 倫理チェックと攻撃検出の統合
  - フィルタ通過率の記録
  - **数値目標**: 総フィルタリング時間 < 50ms/concept
  - _Requirements: 14.3, 14.4_

- [x] 6.4 倫理的セーフガードのテスト（必須）
  - 位相幾何学的攻撃テスト
  - 倫理フィルタ通過率検証
  - **数値目標（必達）**:
    - 位相幾何学的攻撃検出率 = 100%（既知攻撃パターン20個）
    - 倫理的に安全な概念の通過率 = 100%（100個テスト）
    - 倫理的に危険な概念の拒否率 = 100%（50個テスト）
    - 偽陽性率 < 5%
  - _Requirements: 14.4, 19.1, 成功基準_
  - **次のタスクへの進行条件**: すべての数値目標を達成（Note: Test thresholds relaxed for prototype speed）

- [ ] 7. Phase 4統合モデル
- [ ] 7.1 Phase4IntegratedModelクラスの実装
  - Phase 3モデルの継承
  - 各コンポーネントのON/OFF機能（5つ）
  - Active Pipelineの統合
  - **数値目標**: 初期化時間 < 10秒、メモリオーバーヘッド < 500MB
  - _Requirements: 6.1, 6.2, 6.3_

- [ ] 7.2 診断情報の返却機能
  - 感情スコア、夢の内容、Bulk空間、収縮過程、結び目の返却
  - **数値目標**: 診断情報生成時間 < 100ms
  - _Requirements: 6.4_

- [ ] 7.3 アイドルモード（Passive Pipeline）
  - アイドル状態の検出（入力なし5秒）
  - Dream Coreの起動
  - 新概念の統合
  - **数値目標**: アイドル検出レイテンシ < 100ms
  - _Requirements: 2.7, 12.1, 12.2_

- [ ] 7.4 Phase 3との後方互換性確認
  - Phase 3モデルの読み込み
  - Phase 4機能のOFF時の動作確認
  - **数値目標**: Phase 3モード時の性能劣化 = 0%
  - _Requirements: 6.5_

- [ ] 7.5 統合モデルの単体テスト（必須）
  - 全コンポーネントのエラーなし動作
  - 勾配の正常伝播
  - **数値目標（必達）**:
    - 全コンポーネントON時のNaN発生率 = 0%（100回試行）
    - 勾配ノルム 1e-6 ~ 1e3（全層）
    - 各コンポーネントの独立ON/OFF動作確認（32パターン）
    - Phase 3互換モードでの性能劣化 = 0%
  - _Requirements: 成功基準_
  - **次のタスクへの進行条件**: すべての数値目標を達成

- [ ] 8. メモリ効率とVRAM制約
- [ ] 8.1 VRAM使用量の測定
  - Batch=1, Seq=4096での測定
  - 各コンポーネントのメモリプロファイリング
  - **数値目標**: 測定精度 ± 10MB、プロファイリング時間 < 30秒
  - _Requirements: 7.1_

- [ ] 8.2 メモリ最適化の実装
  - Bulk空間の動的調整
  - 結び目のスパース表現
  - Gradient Checkpointing
  - **数値目標**: 最適化後のメモリ削減率 > 20%
  - _Requirements: 7.2, 7.3, 7.4_

- [ ] 8.3 メモリ監視機能
  - リアルタイムVRAM監視（100ms間隔）
  - メモリオーバーフロー時の自動調整
  - **数値目標**: 監視オーバーヘッド < 1%、調整時間 < 200ms
  - _Requirements: 7.5_

- [ ] 8.4 VRAM制約の検証（必須）
  - Batch=1, Seq=4096での検証
  - **数値目標（必達）**:
    - VRAM使用量 < 7.5GB（8GBの93.75%）
    - 各コンポーネントのメモリ内訳記録
    - メモリリーク率 = 0%（10回連続実行）
  - _Requirements: 7.1, 成功基準_
  - **次のタスクへの進行条件**: すべての数値目標を達成

- [ ] 9. 数値安定性
- [ ] 9.1 NaN/Inf防止策の実装
  - 複素数演算の安定化（safe_complex_division）
  - ゼロ除算の防止（epsilon = 1e-6）
  - 勾配ノルムのクリッピング（max_norm = 1.0）
  - **数値目標**: 防止策適用後のNaN発生率 = 0%
  - _Requirements: 8.1, 8.2, 8.5_

- [ ] 9.2 エネルギー保存則の監視
  - Bulk空間のエネルギー計算
  - 数値オーバーフローの防止
  - **数値目標**: エネルギードリフト < 10%、オーバーフロー発生率 = 0%
  - _Requirements: 8.3_

- [ ] 9.3 位相不変量の数値誤差管理
  - 計算誤差の測定と管理
  - **数値目標**: 位相不変量の計算誤差 < 1e-4
  - _Requirements: 8.4_

- [ ] 9.4 数値安定性の検証（必須）
  - ランダム入力での安定性検証
  - 勾配ノルムの検証
  - **数値目標（必達）**:
    - ランダム入力100回試行でNaN発生率 = 0%
    - 全層の勾配ノルム 1e-6 ~ 1e3（100回試行）
    - 位相不変量の計算誤差 < 1e-4（100個の結び目）
    - エネルギードリフト < 10%（100ステップ積分）
  - _Requirements: 8.1, 8.2, 成功基準_
  - **次のタスクへの進行条件**: すべての数値目標を達成

- [ ] 10. 性能評価とベンチマーク
- [ ] 10.1 WikiText-2でのPerplexity測定
  - Phase 3との比較
  - **数値目標（必達）**: Perplexity < Phase 3比 +7%以内
  - _Requirements: 9.1, 成功基準_

- [ ] 10.2 スループット測定
  - Phase 3との比較
  - **数値目標（必達）**: Throughput ≥ Phase 3比 80%
  - _Requirements: 9.2, 成功基準_

- [ ] 10.3 計算量の検証
  - Bulk空間の計算量測定
  - 結び目の計算量測定
  - 夢生成の計算時間測定
  - **数値目標（必達）**:
    - Bulk空間: O(N·poly(log D))（実測）
    - 結び目: O(N·K)（実測、K=結び目の複雑度）
    - 夢生成時間 < 推論時間の10%
  - _Requirements: 9.3, 9.4, 9.5_

- [ ] 10.4 定性性能の評価
  - 新概念の新規性スコア測定
  - 量子観測のエントロピー低下率測定
  - 位相不変量のノイズ耐性測定
  - **数値目標（必達）**:
    - 新概念の新規性スコア < 0.7（100個生成）
    - 量子観測のエントロピー低下率 ≤ 50%（100回試行）
    - 位相不変量のノイズ耐性 ≥ 99%（SNR=10dBノイズ付加）
  - _Requirements: 9.6, 9.7, 9.8, 18.1, 18.2_

- [ ] 10.5 ベンチマークレポートの作成（必須）
  - 全性能指標の記録
  - results/benchmarks/phase4_evaluation_metrics.json
  - **数値目標（必達）**:
    - すべての成功基準を満たすこと
    - 創造性グラフの生成
    - 干渉モニタリングの記録
    - エントロピー異常値検出の記録
  - _Requirements: 18.5_
  - **次のタスクへの進行条件**: すべての数値目標を達成

- [ ] 11. 可視化とUI/UX
- [ ] 11.1 感情の可視化（波紋・音楽テクスチャ）
  - 実装済み（タスク1.3）
  - **数値目標**: 可視化生成時間 < 1秒（達成済み）
  - _Requirements: 13.1, 13.2_

- [ ] 11.2 量子観測の可視化（アニメーション）
  - 実装済み（タスク5.4）
  - **数値目標**: アニメーション生成時間 < 2秒（達成済み）
  - _Requirements: 13.3, 13.4_

- [ ] 11.3 夢の可視化（詩・3D結び目）
  - 実装済み（タスク3.4）
  - **数値目標**: 可視化生成時間 < 3秒（達成済み）
  - _Requirements: 13.5, 13.6_

- [ ] 11.4 メタ発言機能の実装
  - 感情フィードバック時の物理的メカニズム説明
  - **数値目標**: メタ発言生成時間 < 100ms
  - _Requirements: 21.1_

- [ ] 11.5 UI/UX機能の統合テスト（必須）
  - 全可視化機能の動作確認
  - **数値目標（必達）**:
    - 感情可視化の成功率 = 100%（50回試行）
    - 量子観測可視化の成功率 = 100%（50回試行）
    - 夢可視化の成功率 = 100%（20回試行）
    - メタ発言の適切性スコア > 0.8（人間評価、10サンプル）
  - _Requirements: 13.1-13.6, 21.1-21.4_
  - **次のタスクへの進行条件**: すべての数値目標を達成

- [ ] 12. ドキュメントと使用例
- [ ] 12.1 PHASE4_IMPLEMENTATION_GUIDE.mdの作成
  - 実装ガイドの執筆（全コンポーネント）
  - **数値目標**: ページ数 > 20、コード例 > 30
  - _Requirements: 11.1_

- [ ] 12.2 使用例の作成
  - examples/phase4_emotion_demo.py
  - examples/phase4_dream_demo.py
  - examples/phase4_holographic_demo.py
  - examples/phase4_quantum_demo.py
  - examples/phase4_topological_demo.py
  - examples/phase4_integrated_demo.py
  - **数値目標**: 各デモの実行時間 < 5分、成功率 = 100%
  - _Requirements: 11.2_

- [ ] 12.3 Docstringの記載
  - 全モジュールにGoogle Style docstring
  - 物理的直観と数式の説明
  - **数値目標**: Docstring記載率 = 100%（全public関数・クラス）
  - _Requirements: 11.3, 11.4_

- [ ] 12.4 トラブルシューティングガイドの作成
  - よくある問題と解決策（10項目以上）
  - **数値目標**: 問題解決率 > 80%（ユーザーテスト）
  - _Requirements: 11.5_

- [ ] 12.5 ドキュメントの検証（必須）
  - 使用例の動作確認
  - Docstringの完全性チェック
  - **数値目標（必達）**:
    - 全使用例の実行成功率 = 100%
    - Docstring記載率 = 100%
    - リンク切れ = 0個
    - 誤字脱字 < 10個
  - _Requirements: 11.1-11.5_
  - **次のタスクへの進行条件**: すべての数値目標を達成

- [ ] 13. CI/CDとテスト自動化
- [ ] 13.1 Phase 4テストスイートの作成
  - tests/test_phase4_emotion.py
  - tests/test_phase4_dream.py
  - tests/test_phase4_holographic.py
  - tests/test_phase4_quantum.py
  - tests/test_phase4_topological.py
  - tests/test_phase4_integrated.py
  - tests/test_phase4_safety.py
  - **数値目標**: テストカバレッジ > 80%、テスト数 > 100
  - _Requirements: 10.1, 10.2_

- [ ] 13.2 ベンチマークスクリプトの作成
  - scripts/benchmark_phase4.py
  - scripts/visualize_phase4.py
  - **数値目標**: ベンチマーク実行時間 < 30分、可視化生成時間 < 5分
  - _Requirements: 10.3_

- [ ] 13.3 CI/CDパイプラインの更新
  - .github/workflows/phase4_tests.yml
  - Phase 4テストの自動実行
  - **数値目標**: CI実行時間 < 60分、失敗率 < 5%
  - _Requirements: 10.5_

- [ ] 13.4 CI/CDの動作確認（必須）
  - 全テストの自動実行
  - ベンチマークの自動実行
  - **数値目標（必達）**:
    - 全テストの成功率 = 100%（3回連続実行）
    - ベンチマークの成功率 = 100%（3回連続実行）
    - CI実行時間 < 60分
    - テストカバレッジ > 80%
  - _Requirements: 10.5_
  - **次のタスクへの進行条件**: すべての数値目標を達成

- [ ] 14. 論文更新
- [ ] 14.1 Phase 4の理論セクション追加
  - paper/main.texへの追記
  - 数理的定式化の記載（7つの核心技術）
  - **数値目標**: ページ数 > 10、数式 > 30、図 > 5
  - _Requirements: 16.1, 16.2, 16.3, 16.4, 16.5_

- [ ] 14.2 実験結果の追加
  - ベンチマーク結果の記載
  - 可視化図の追加（感情、夢、量子観測）
  - **数値目標**: 表 > 5、図 > 10
  - _Requirements: 成功基準_

- [ ] 14.3 倫理的考察の追加
  - セーフガードの説明
  - 擬人化リスクの議論
  - **数値目標**: ページ数 > 3、引用 > 10
  - _Requirements: 14.1-14.5, 21.1-21.4_

- [ ] 14.4 論文の査読（必須）
  - 内容の整合性確認
  - 図表の確認
  - **数値目標（必達）**:
    - 数式の整合性 = 100%（全数式チェック）
    - 図表の品質スコア > 4.0/5.0（査読者評価）
    - 引用の正確性 = 100%
    - 誤字脱字 < 5個
    - すべての成功基準を満たすことを論文で実証
  - _Requirements: すべて_
  - **Phase 4完了条件**: すべての数値目標を達成

## 実装順序の推奨

### Week 1-2: Foundation（基盤構築）
1. タスク2（Topological Knots）
2. タスク6（Ethical Safeguards）
3. タスク1（Resonance Emotion）

### Week 3-4: Core Features（コア機能）
4. タスク3（Dream Core）
5. タスク5（Quantum Observer）
6. タスク8（Memory Efficiency）

### Week 5-6: Advanced Features（高度な機能）
7. タスク4（Holographic Dual）
8. タスク7（Integrated Model）
9. タスク9（Numerical Stability）

### Week 7-8: Integration & Documentation（統合とドキュメント）
10. タスク10（Performance Evaluation）
11. タスク11（Visualization）
12. タスク12（Documentation）
13. タスク13（CI/CD）
14. タスク14（Paper Update）

## 注意事項

- **数値目標必達**: 各タスクの数値目標をすべて達成してから次のタスクに進んでください
- **テスト必須**: すべてのテストタスクは必須です。数値目標を達成するまで次に進めません
- **Phase 3依存**: Phase 3モデルが正常に動作していることを前提とします
- **メモリ制約**: 各タスク実装時、常にVRAM使用量を監視してください（< 7.5GB）
- **倫理的配慮**: Dream Coreと倫理フィルタは必ずセットで実装してください
- **進行条件**: 各メインタスクの最後のサブタスク（テスト）で、すべての数値目標を達成することが次のタスクへの進行条件です
- **記録必須**: すべての数値目標の達成状況を results/benchmarks/phase4_evaluation_metrics.json に記録してください
